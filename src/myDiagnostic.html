<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .description-box {
            margin-top: 10px;
            padding: 10px;
            border-left: 4px solid #ccc;
            background: #f9f9f9;
            font-size: 0.9em;
            min-height: 60px;
            line-height: 1.4;
        }
        .input-group {
            margin-bottom: 20px;
            font-family: sans-serif;
        }
        input[type=range] {
            width: 100%;
            margin: 10px 0;
        }
        </style>

</head>
<body>


    <form name="form1" style="display:flex; flex-direction: column; width: 90%; margin: auto;" >
    
      <label for="Pain">Наявність больових відчуттів, дискомфорту:</label>
      <select name="Pain" id="Pain">        
        <option value="1">Нічого не болить, дискомфорту немає</option>
        <option value="2">Невеликий больовий дискомфорт, заважає мало</option>
        <option value="3">Помірний біль, концетрація через не хочу</option>
        <option value="4">Біль заважає концетруватись</option>
        <option value="5">Нестерпний біль або хвороба</option>
      </select>

      <label for="SelfAttitude">Ставлення до себе:</label>
      <select SelfAttitude="SelfAttitude" id="SelfAttitude">        
        <option value="1">Самознищення / Ненависть. (Відчуваю себе дефектним, повне несприйняття).</option>
        <option value="2">Жорстка критика / Знецінення. (Ігнорую успіхи, фокусуюсь на помилках)</option>
        <option value="3">Тиск / Страх. (Ставлення як до інструменту: "Треба більше, інакше все пропаде". Страх не відповідати стандартам)</option>
        <option value="4">Холодний нейтралітет (Відключив емоції. Не сварю, але й не підтримую.)</option>
        <option value="5">Конструктивне партнерство. (Бачу помилки, але без емоційного забарвлення. "Ок, фіксимо баги, йдемо далі")</option>
        <option value="6">Турбота і Підтримка. (Повне прийняття і ясне розуміння стану. Співчуваю, знахожу підтримку в собі, якщо важко. )</option>
        <option value="7">Надмірна жалість, виправдання</option>      
      </select>

      <label for="Attention">Акцент свідомості (уваги):</label>
      <select SelfAttitude="Attention" id="Attention">     
        <option value="1">Невизначеність: Ніде, розсіяний, "вилетів" із реальності</option>          
        <option value="2">Тіло: Ясно відчуваю тіло фізично, заземлений.</option>
        <option value="3">Світ: В контакті з оточенням (тут і зараз)</option>
        <option value="4">Думки: Я в абстракціях / аналізі / фантазіях</option>
        <option value="5">Мета-позиція: Я спостерігаю за всім цим одночасно (Дистанція)</option>             
      </select>

      <label for="Concentration">Якість присутності та фокусу:</label>
      <select SelfAttitude="Concentration" id="Concentration">    
        <option value="1">Потік — повне злиття з процесом, мислення чітке й беззусильне</option> 
        <option value="2">Спринт — мислення швидке й ясне, енергія витрачається швидко</option> 
        <option value="3">Стійкість — впевнено тримаю фокус волею, мислення стабільне, потребує контролю</option> 
        <option value="4">Рівний ритм — звична робота без особливих осяянь; увага тримається легко й довго</option> 
        <option value="5">Пунктрирна увага — працюю, але часто «випадаю» з процесу, потребує зупинок</option> 
        <option value="6">Розпорошеність — думки стрибають, увага ковзає по поверхні, не заглиблюючись</option>
        <option value="7">Туман — мислення важке, сповільнене, низька ясніть</option> 
        <option value="8">Опір, прокрастинація - не можу або не хочу зосередитись</option>
        <option value="9">Вільне споглядання — відпочинок, дії без потреби в концентрації</option>              
      </select>

      <label for="Pain">Тригер чи умови поточного стану, емоції, почуття:</label>
      <input type="text" name="Trigger" id="Trigger" placeholder="Опиши тригер чи умови..." >

      <label for="Notes">Особливі спостереження, примітки, інсайти:</label>
      <input type="text" name="Notes" id="Trigger"  >
      


        <fieldset style="display: flex; flex-direction: column;">       

        <div class="input-group">
            <label for="Pleasure">Задоволення (Valence): <span id="pleasure-value">0</span></label>
            <input name="Pleasure" type="range" min="-5" max="5" step="1" value="0" id="pleasure-slider" oninput=sliderChange(event)>
            
            <div id="pleasure-desc" class="description-box">
                <strong>Тіло:</strong> <span id="body-desc">Стан очікування даних.</span><br>
                <strong>Психіка:</strong> <span id="psyche-desc">Стерильність. Просто логування.</span>
            </div>
        </div>     

        <div class="input-group">
            <label for="Energy">Енергія (Valence): <span id="energy-value">0</span></label>
            <input name="Energy" type="range" min="-5" max="5" step="1" value="0" id="energy-slider" oninput=sliderChange(event)>
            
            <div id="energy-desc" class="description-box">
                <strong>Тіло:</strong> <span id="body-desc">Стан очікування даних.</span><br>
                <strong>Психіка:</strong> <span id="psyche-desc">Стерильність. Просто логування.</span>
            </div>
        </div>     

        <div class="input-group">
            <label for="Control">Контроль (Valence): <span id="control-value">0</span></label>
            <input name="Control" type="range" min="-5" max="5" step="1" value="0" id="control-slider" oninput=sliderChange(event)>
            
            <div id="control-desc" class="description-box">
                <strong>Тіло:</strong> <span id="body-desc">Стан очікування даних.</span><br>
                <strong>Психіка:</strong> <span id="psyche-desc">Стерильність. Просто логування.</span>
            </div>
        </div>     


    <input 
        type="text" 
        id="emotion-search" 
        list="emotion-datalist" 
        placeholder="Почни вводити назву (напр. Азарт...)"
        class="w-full p-3 bg-slate-800 text-white border border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all"
    >
    <datalist id="emotion-datalist">
        <!-- Буде заповнено через JS -->
    </datalist>

    

    </fieldset>

       

    </form>


<script>

/* Дані для опису станів задоволення*/

const pleasureData = {
"-5": {
    body: "Фізичний шок, холод у кінцівках, повне виснаження. Тіло практично не слухається.",
    psyche: "Тотальний відчай. Реальність сприймається як ворожа. Повне несприйняття життя."
  },
  "-4": {
    body: "Стиснення в грудях, нудота, гострий м'язовий спазм (шия, спина). Фізичний біль.",
    psyche: "Активне неприйняття. Кожна думка викликає роздратування або страждання. Стан на межі зриву."
  },
  "-3": {
    body: "Важкість у тілі, неприємні відчуття в шлунку. Бажання закритися від усіх і нічого не бачити.",
    psyche: "Висока дратівливість. Світ здається несправедливим, оточуючі викликають лише негатив."
  },
  "-2": {
    body: "Підняті плечі, затиснута щелепа, поверхневе дихання. Постійна напруга.",
    psyche: "Фоновий песимізм. Усе навколо дратує: побут, погода, дрібниці. Постійне внутрішнє невдоволення."
  },
  "-1": {
    body: "Легкий дискомфорт, скутість у м'язах. Брак енергії, сонливість.",
    psyche: "Апатія. Відсутність інтересу до подій. Жити можна, але нічого не приносить задоволення."
  },
  "0": {
    body: "Фізична нейтральність. Відсутність болю або вираженого комфорту. Стан спокою.",
    psyche: "Емоційний нуль. Рівний стан спостерігача. Відсутність оціночних суджень."
  },
  "+1": {
    body: "М'язи розслаблені, дихання вільне. Відчуття фізичного спокою.",
    psyche: "Стабільність. Почуття безпеки та базового комфорту. Можна спокійно планувати справи."
  },
  "+2": {
    body: "Приємне тепло, стабільний тонус. Легка усмішка з'являється сама собою.",
    psyche: "Помірний оптимізм. Здатність помічати хороші деталі навколо. Приємний настрій."
  },
  "+3": {
    body: "Фізична легкість, відчуття сили. Хочеться розправити спину і рухатися.",
    psyche: "Впевненість. Бажання діяти і створювати. Спокійне і конструктивне ставлення до проблем."
  },
  "+4": {
    body: "Високий рівень енергії, приплив сил. Відчуття бадьорості в усьому тілі.",
    psyche: "Натхнення. Світ сприймається як простір можливостей. Висока захопленість справою."
  },
  "+5": {
    body: "Максимальний фізичний комфорт. Тіло відчувається легким і повністю здоровим.",
    psyche: "Повна гармонія. Стан абсолютної задоволеності собою і світом. Усе сприймається ідеальним."
  }
};

const EnergyData = {
  "-5": {
    body: "Майже повна фізична відсутність реакцій; важкість у рухах, потреба негайного відпочинку.",
    psyche: "Когнітивна загальмованість або блекаут; неможливість зосередитися або приймати рішення."
  },
  "-4": {
    body: "Сильна сонливість, повільні рефлекси; координація порушена.",
    psyche: "Суттєве зниження уваги; мислення уповільнене, складно виконувати складні завдання."
  },
  "-3": {
    body: "Виражена втома; рухи уповільнені, очі швидко втомлюються.",
    psyche: "Зниження концентрації; труднощі з підтримкою довготривалої уваги."
  },
  "-2": {
    body: "Млявість, низький тонус; відчуття, що потрібно трохи відпочити.",
    psyche: "Понижена продуктивність; виконання рутинних завдань потребує зусиль."
  },
  "-1": {
    body: "Легка втома, зниження швидкості реакцій; потреба в короткій перерві.",
    psyche: "Невелике зниження мотивації; здатність працювати, але не на піку."
  },
  "0": {
    body: "Фізична готовність до дії без надлишкової напруги; стабільний тонус.",
    psyche: "Рівна увага; оптимальна база для прийняття рішень і виконання завдань."
  },
  "+1": {
    body: "Легка бадьорість; відчуття свіжості і готовності почати роботу.",
    psyche: "Покращена концентрація; підвищена здатність до фокусування."
  },
  "+2": {
    body: "Стабільний робочий тонус; швидші реакції, відчуття зібраності.",
    psyche: "Підвищена продуктивність; ефективне перемикання між завданнями."
  },
  "+3": {
    body: "Висока активність; відчуття потоку в тілі, енергія для тривалої роботи.",
    psyche: "Стан потоку; швидке мислення і креативність."
  },
  "+4": {
    body: "Гіперактивність; сильна моторна готовність, інтенсивні жести.",
    psyche: "Азарт і драйв; думки швидкі, можливе зниження фільтрації інформації."
  },
  "+5": {
    body: "Екстремальний приплив сил; відчуття надвисокої витривалості.",
    psyche: "Маніакальна або ейфорійна фокусованість; ризик імпульсивних рішень через надлишок енергії."
  }
};



const ControlData = {
  "-5": {
    body: "Повний параліч або заціпеніння. Дихання ледь помітне, м'язи «кам'яні». Тіло не реагує на команди мозку.",
    psyche: "Kernel Panic. Повний блекаут свідомості. Ти не суб'єкт, ти — об'єкт, з яким щось стається. Жах або глибокий шок."
  },
  "-4": {
    body: "Хаотична активність. Тахікардія, тремор, холодний піт. Тіло намагається «втекти» від самого себе.",
    psyche: "Паніка. Думки несуться хаотично, жодну неможливо затримати. Повна втрата керма, стан «некерованого заносу»."
  },
  "-3": {
    body: "Затиснута грудна клітка, клубок у горлі. Відчуття фізичної обмеженості, ніби ти в тісній клітці.",
    psyche: "Одержимість (Infinite Loop). Румінація керує тобою. Ти усвідомлюєш деструктивність стану, але не маєш доступу до кнопки Stop."
  },
  "-2": {
    body: "Стиснуті щелепи, підняті плечі. Висока готовність до різких, смиканих рухів.",
    psyche: "Реактивність. Ти дієш на рівні безумовних рефлексів: огризаєшся, кидаєш речі. Реакція випереджає усвідомлення."
  },
  "-1": {
    body: "Неспокій моторики: ерзання, перебирання пальцями, кусання губ. Брак фізичної опори.",
    psyche: "Хиткість. Ти намагаєшся триматися, але будь-який зовнішній «пуш» (сповіщення, коментар) легко вибиває тебе з колії."
  },
  "0": {
    body: "Фізична нейтральність. Рівне дихання без специфічного розслаблення чи напруження.",
    psyche: "Чистий моніторинг. Стан «ReadOnly». Ти фіксуєш події як лог-файли, не намагаючись на них впливати. Точка спостерігача."
  },
  "+1": {
    body: "Заземлення. Чітке відчуття ваги тіла, стоп на підлозі. Дихання стає глибшим.",
    psyche: "Повернення в систему. З'являється мікро-пауза між стимулом і реакцією. Ти знову пам'ятаєш, ХТО тут приймає рішення."
  },
  "+2": {
    body: "Плечі опускаються, мімічні затискачі слабшають. З'являється відчуття простору навколо тіла.",
    psyche: "Усвідомлений вибір. Ти бачиш емоцію, але вона не тисне на педалі. Ти обираєш дію, ігноруючи автоматичний імпульс."
  },
  "+3": {
    body: "Пряма спина, впевнене дихання животом. Відчуття фізичного «центру» або стрижня.",
    psyche: "Executive Control. Ти господар своєї енергії. Гнів стає інструментом захисту, драйв — інструментом праці. Висока концентрація."
  },
  "+4": {
    body: "Точність та економність рухів. Повна відсутність зайвої напруги навіть при складних діях.",
    psyche: "Адаптивність. Ти можеш свідомо змінювати свій стан («перемикати контекст»). Емоції сприймаються як дані, якими можна оперувати."
  },
  "+5": {
    body: "Стан «прозорості». Тіло відчувається як ідеально налагоджений механізм, що не чинить опору волі.",
    psyche: "Абсолютний суверенітет. Повний збіг внутрішніх цінностей і зовнішніх дій. Внутрішній штиль, який неможливо порушити зовні."
  }
}
    

let emotionDatabase = [
    { name: "Гнів", p: -4, e: 4, c: 3, desc: "Агресивна мобілізація. Бажання знищити перешкоду." },
    { name: "Тривога", p: -3, e: 3, c: -2, desc: "Невизначена загроза. Внутрішня петля накручування." },
    { name: "Страх", p: -5, e: 5, c: -4, desc: "Загроза залізу. Імпульс на негайну втечу." },
    { name: "Жах", p: -5, e: 5, c: -5, desc: "Повний системний дефолт. Безпорадність перед катастрофою." },
    { name: "Нудьга", p: -2, e: -3, c: -1, desc: "Дефіцит стимулів. Повільне згасання інтересу." },
    { name: "Фрустрація", p: -4, e: 2, c: -2, desc: "Твої 'колеги-дурники'. Перешкода, яку неможливо обійти." },
    { name: "Огида", p: -4, e: 1, c: 2, desc: "Відторгнення шкідливого контенту або коду." },
    { name: "Сум", p: -4, e: -3, c: -2, desc: "Енергозбереження. Реакція на втрату ресурсу." },
    { name: "Провина", p: -4, e: 1, c: -4, desc: "Самоїдство. Рівень 2/3 у найгіршому прояві." },
    { name: "Інтерес", p: 4, e: 3, c: 2, desc: "Чистий драйв пізнання. Паливо для Рівня 4." },
    { name: "Спокій", p: 3, e: -2, c: 3, desc: "Стабільна робота системи. Низький шум." },
    { name: "Радість", p: 5, e: 3, c: 2, desc: "Профіцит енергії та задоволення." },
    { name: "Впевненість", p: 3, e: 2, c: 4, desc: "Я контролюю ситуацію. Все йде за планом." },
    { name: "Полегшення", p: 4, e: -3, c: 2, desc: "Фух. Баг пофікшено (або він не мій)." },
    { name: "Здивування", p: 0, e: 5, c: 0, desc: "Interrupt. Раптова зміна вхідних даних." },
    { name: "Натхнення", p: 5, e: 4, c: 3, desc: "Піковий творчий потік. Зв'язок з ідеалом." },
    { name: "Гордість", p: 4, e: 2, c: 4, desc: "Позитивна самооцінка результату." },
    { name: "Азарт", p: 5, e: 4, c: 2, desc: "Гра на межі ризику та винагороди." },
    { name: "Зневага", p: -2, e: 1, c: 3, desc: "Я зверху, об'єкт — нікчемний." },
    { name: "Сором", p: -4, e: 2, c: -4, desc: "Соціальна дезінтеграція. Бажання стати невидимим." },
    { name: "Задоволення", p: 4, e: 1, c: 3, desc: "Комфортне завершення циклу." },
    { name: "Надія", p: 2, e: 2, c: -1, desc: "Очікування позитиву при слабкому контролі." },
    { name: "Ейфорія", p: 5, e: 5, c: 2, desc: "Максимальний хімічний буст." },
    { name: "Меланхолія", p: -1, e: -3, c: -2, desc: "Приємна туга. 'Saudade'." },
    { name: "Апатія", p: -3, e: -5, c: -4, desc: "Повний розряд батареї. Відсутність сенсів." },
    { name: "Захоплення (Awe)", p: 4, e: 5, c: -2, desc: "Трепет перед чимось величним." },
    { name: "Вразливість", p: -1, e: 2, c: -4, desc: "Відкриті порти. Страх бути пошкодженим." }
];


const datalist = document.getElementById('emotion-datalist');

function sliderChange(e){

    let val = (e.target.value > 0 ? "+" : "") + e.target.value;
    console.log(val);
    let idPrefix = e.target.id.split('-')[0]; // Отримуємо префікс id (pleasure, energy, control)
    console.log(idPrefix);
    
    let valLabel = document.getElementById(idPrefix + '-value');
    console.log(valLabel);
    
    let bodyDesc = document.getElementById(idPrefix + '-desc').querySelector('#body-desc'); 
    let psycheDesc = document.getElementById(idPrefix + '-desc').querySelector('#psyche-desc');

    valLabel.innerHTML =  val;
    let data;
    if(idPrefix === 'pleasure'){
        data = pleasureData;
    } else if(idPrefix === 'energy'){
        data = EnergyData;
    } else if(idPrefix === 'control'){
        data = ControlData; 
    }
    bodyDesc.innerHTML = data[val].body;
    psycheDesc.innerHTML = data[val].psyche;

}

function sortEmotions(userP, userE, userC) {
    emotionDatabase = emotionDatabase.map(emo => {
        const distance = Math.sqrt(
            Math.pow(userP - emo.p, 2) +
            Math.pow(userE - emo.e, 2) +
            Math.pow(userC - emo.c, 2)
        );

        return { ...emo, distance };
    }).sort((a, b) => a.distance - b.distance);
  
}

// Заміна datalist і input на таблицю
const tableContainer = document.createElement('div');
tableContainer.id = 'emotion-table-container';
const table = document.createElement('table');
const tableHeader = document.createElement('thead');
const tableBody = document.createElement('tbody');

// Додавання заголовків таблиці
const headerRow = document.createElement('tr');
['Емоція', 'Іконка', 'P', 'E', 'C', 'відстань'].forEach(headerText => {
    const th = document.createElement('th');
    th.textContent = headerText;
    headerRow.appendChild(th);
});
tableHeader.appendChild(headerRow);
table.appendChild(tableHeader);
table.appendChild(tableBody);
tableContainer.appendChild(table);

document.getElementById('emotion-search').replaceWith(tableContainer);

function updateEmotionList() {

    console.log("updateEmotionList");
    
    const userP = parseInt(document.getElementById('pleasure-slider').value);
    const userE = parseInt(document.getElementById('energy-slider').value);
    const userC = parseInt(document.getElementById('control-slider').value);

    sortEmotions(userP, userE, userC);

    // Очищення попередніх варіантів
    tableBody.innerHTML = '';

    // Додавання відсортованих емоцій до таблиці
    emotionDatabase.forEach(emo => {
        const row = document.createElement('tr');

        const nameCell = document.createElement('td');
        nameCell.textContent = emo.name;
        row.appendChild(nameCell);

        const iconCell = document.createElement('td');
        iconCell.textContent = emo.icon;
        row.appendChild(iconCell);

        const distancePCell = document.createElement('td');
        distancePCell.textContent = `${emo.p} (${emo.p - userP})`;
        row.appendChild(distancePCell);

        const distanceECell = document.createElement('td');
        distanceECell.textContent = `${emo.e} (${emo.e - userE})`;
        row.appendChild(distanceECell);

        const distanceCCell = document.createElement('td');
        distanceCCell.textContent = `${emo.c} (${emo.c - userC})`;
        row.appendChild(distanceCCell);

        const totalDistanceCell = document.createElement('td');
        totalDistanceCell.textContent = emo.distance.toFixed(2);
        row.appendChild(totalDistanceCell);

        tableBody.appendChild(row);
    });
}

// document.getElementById('emotion-search').addEventListener('input', updateEmotionList);
// document.getElementById('emotion-search').addEventListener('click', updateEmotionList);
//document.getElementById('emotion-search').addEventListener('touchstart', updateEmotionList);

document.getElementById('pleasure-slider').addEventListener('input', updateEmotionList);
document.getElementById('energy-slider').addEventListener('input', updateEmotionList);
document.getElementById('control-slider').addEventListener('input', updateEmotionList);

</script>
</body>
</html>